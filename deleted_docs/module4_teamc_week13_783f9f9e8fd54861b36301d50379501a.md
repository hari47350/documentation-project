---
id: week13
title: Week 13 â€” Teamc
sidebar_label: Week 13
---

# Week 5 \- SmartIDH3: MongoDB Schema Hardening, Migrations, Backups &amp;amp; Benchmarking

## 1\. Overview

```text title="week13.md snippet 1"
This document contains a comprehensive record of Week 5 work for the SmartIDH3 project\. It covers schema hardening for the parsed\_segments collection, migrations, index tuning, TTLs, backup scripts, stress & benchmark tests, troubleshooting notes \(issues encountered and fixes\), and instructions to run every script with exact file names as present in the repository\.
```

## 2\. Environment &amp;amp; Prerequisites

```text title="week13.md snippet 2"
Required software and environment:
```

```text title="week13.md snippet 3"
\- Python \(3\.10\+ recommended\)
```

```text title="week13.md snippet 4"
\- Virtual environment \(recommended \.venv\)
```

```text title="week13.md snippet 5"
\- MongoDB \(local or remote\) with access and appropriate user/URI
```

```text title="week13.md snippet 6"
\- MongoDB Database Tools \(mongodump\) for backups
```

```text title="week13.md snippet 7"
\- Python dependencies: pymongo
```

  
```text title="week13.md snippet 8"
Setup commands \(example\):
```

python \-m venv \.venv  
\.venv\\Scripts\\Activate\.ps1  \# on Windows PowerShell  
pip install pymongo

## 3\. Project files \(exact names \- do not change\)

Below are the important files in the repository\. These names are used exactly in the code and scripts; do not rename them\.

\- storage/mongo\_client\.py

\- storage/migrations/v2\_harden\_parsed\_segments\.py

\- storage/create\_indexes\.py

\- scripts/backup\_mongosh\.ps1

\- tests/stress\_test\_parsed\_segments\.py

\- tests/stress\_benchmark\.py

\- tests/benchmark\_queries\.py

\- tests/benchmark\_post\_migration\.py

\- tests/full\_workflow\.py

\- storage/mongo\_schema\.md

## 4\. storage/mongo\_client\.py \(DB connection &amp;amp; index ensures\)

```python title="week13.md snippet 9"
This file provides the MongoDB client and ensures initial indexes and helper get\_db\(\)\. Keep the file at storage/mongo\_client\.py and import it as 'from storage\.mongo\_client import get\_db'\.
```

```text title="week13.md snippet 10"
Example content \(already present in repo\):
```

```python
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
from pymongo import MongoClient  
```