"use strict";(self.webpackChunkproject_docs=self.webpackChunkproject_docs||[]).push([[8811],{2234:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"modules/module1/teamA/week3","title":"Week 03 \u2014 Teama","description":"1\\\\. Overview","source":"@site/docs/modules/module1/teamA/week3.md","sourceDirName":"modules/module1/teamA","slug":"/modules/module1/teamA/week3","permalink":"/docs/modules/module1/teamA/week3","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"week3","title":"Week 03 \u2014 Teama","sidebar_label":"Week 03"},"sidebar":"docsSidebar","previous":{"title":"Week 02","permalink":"/docs/modules/module1/teamA/week2"},"next":{"title":"Week 04","permalink":"/docs/modules/module1/teamA/week4"}}');var r=t(4848),s=t(8453);const a={id:"week3",title:"Week 03 \u2014 Teama",sidebar_label:"Week 03"},l="MongoDB Setup & Schema Runbook",d={},o=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. MongoDB Schema Design",id:"2-mongodb-schema-design",level:2},{value:"2.1 Collections Overview",id:"21-collections-overview",level:3},{value:"2.2 users Collection",id:"22-users-collection",level:3},{value:"2.3 tenants Collection",id:"23-tenants-collection",level:3},{value:"2.4 raw_documents Collection",id:"24-raw_documents-collection",level:3},{value:"2.5 parsed_segments Collection",id:"25-parsed_segments-collection",level:3},{value:"3. MongoDB Docker Setup",id:"3-mongodb-docker-setup",level:2},{value:"3.1 docker-compose.yml",id:"31-docker-composeyml",level:3},{value:"3.2 Run MongoDB Container",id:"32-run-mongodb-container",level:3},{value:"3.3 Verify",id:"33-verify",level:3},{value:"4. Python Client Configuration",id:"4-python-client-configuration",level:2},{value:"4.1 Dependencies",id:"41-dependencies",level:3},{value:"4.3 Python Client Example",id:"43-python-client-example",level:3},{value:"5. Authentication Verification",id:"5-authentication-verification",level:2},{value:"6. Acceptance Criteria",id:"6-acceptance-criteria",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mongodb-setup--schema-runbook",children:"MongoDB Setup & Schema Runbook"})}),"\n",(0,r.jsx)(n.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 1"',children:"This document provides step\\-by\\-step instructions to:\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Design MongoDB schema for SmartIDH3 project"}),"\n",(0,r.jsx)(n.li,{children:"Deploy MongoDB via Docker"}),"\n",(0,r.jsx)(n.li,{children:"Connect using Python client (mongo_client.py)"}),"\n",(0,r.jsx)(n.li,{children:"Verify authentication and CRUD operations"}),"\n",(0,r.jsx)(n.li,{children:"Ensure other developers can replicate setup"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 2"',children:"Learning focus: NoSQL modeling, transactions, indexes, multi\\-tenant data isolation\\.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"2-mongodb-schema-design",children:"2. MongoDB Schema Design"}),"\n",(0,r.jsx)(n.h3,{id:"21-collections-overview",children:"2.1 Collections Overview"}),"\n",(0,r.jsx)(n.p,{children:"Collection"}),"\n",(0,r.jsx)(n.p,{children:"Purpose"}),"\n",(0,r.jsx)(n.p,{children:"users"}),"\n",(0,r.jsx)(n.p,{children:"Store user metadata, role, tenant association"}),"\n",(0,r.jsx)(n.p,{children:"tenants"}),"\n",(0,r.jsx)(n.p,{children:"Track tenant organizations"}),"\n",(0,r.jsx)(n.p,{children:"raw_documents"}),"\n",(0,r.jsx)(n.p,{children:"Store uploaded file metadata"}),"\n",(0,r.jsx)(n.p,{children:"parsed_segments"}),"\n",(0,r.jsx)(n.p,{children:"Store structured content extracted from raw documents"}),"\n",(0,r.jsx)(n.h3,{id:"22-users-collection",children:"2.2 users Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 3"',children:"Example document:\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 4"',children:'\\{  \r\n  "\\_id": ObjectId\\(\\),  \r\n  "email": "alice@example\\.com",  \r\n  "tenant\\_id": "tenant01",  \r\n  "name": "Alice Smith",  \r\n  "role": "admin",  \r\n  "created\\_at": ISODate\\("2025\\-09\\-25T12:00:00Z"\\),  \r\n  "last\\_login": ISODate\\("2025\\-09\\-30T09:30:00Z"\\)  \r\n\\}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 5"',children:"__Indexes:__\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 6"',children:"db\\.users\\.createIndex\\(\\{ email: 1 \\}, \\{ unique: true \\}\\);  \r\ndb\\.users\\.createIndex\\(\\{ tenant\\_id: 1 \\}\\);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"23-tenants-collection",children:"2.3 tenants Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 7"',children:"Example document:\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 8"',children:'\\{  \r\n  "\\_id": "tenant01",  \r\n  "tenant\\_name": "Acme Corporation",  \r\n  "created\\_at": ISODate\\("2025\\-09\\-25T12:00:00Z"\\),  \r\n  "is\\_active": true  \r\n\\}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"24-raw_documents-collection",children:"2.4 raw_documents Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 9"',children:"Example document:\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 10"',children:'\\{  \r\n  "\\_id": ObjectId\\(\\),  \r\n  "tenant\\_id": "tenant01",  \r\n  "file\\_name": "invoice\\_123\\.pdf",  \r\n  "content\\_type": "application/pdf",  \r\n  "storage\\_path": "/s3/invoices/invoice\\_123\\.pdf",  \r\n  "sha256": "dummyhash123456789",  \r\n  "uploaded\\_by": ObjectId\\("user\\_id\\_here"\\),  \r\n  "uploaded\\_at": ISODate\\("2025\\-09\\-25T12:02:00Z"\\),  \r\n  "status": "uploaded"  \r\n\\}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 11"',children:"__Indexes:__\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 12"',children:"db\\.raw\\_documents\\.createIndex\\(\\{ tenant\\_id: 1 \\}\\);  \r\ndb\\.raw\\_documents\\.createIndex\\(\\{ sha256: 1 \\}, \\{ unique: true \\}\\);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"25-parsed_segments-collection",children:"2.5 parsed_segments Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 13"',children:"Example document:\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 14"',children:'\\{  \r\n  "\\_id": ObjectId\\(\\),  \r\n  "document\\_id": ObjectId\\("ref\\_to\\_raw\\_document"\\),  \r\n  "segment\\_type": "header/footer/body",  \r\n  "content": "Parsed content text here",  \r\n  "created\\_at": ISODate\\("2025\\-09\\-25T12:05:00Z"\\)  \r\n\\}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 15"',children:"__Indexes:__\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 16"',children:"db\\.parsed\\_segments\\.createIndex\\(\\{ document\\_id: 1 \\}\\);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"3-mongodb-docker-setup",children:"3. MongoDB Docker Setup"}),"\n",(0,r.jsx)(n.h3,{id:"31-docker-composeyml",children:"3.1 docker-compose.yml"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 17"',children:"version: '3\\.8'  \r\nservices:  \r\n  mongodb:  \r\n    image: mongo:8\\.0  \r\n    container\\_name: mongodb  \r\n    restart: always  \r\n    environment:  \r\n      MONGO\\_INITDB\\_ROOT\\_USERNAME: admin  \r\n      MONGO\\_INITDB\\_ROOT\\_PASSWORD: StrongPassword123\\!  \r\n    ports:  \r\n      \\- \"27017:27017\"  \r\n    volumes:  \r\n      \\- \\./mongo\\_data:/data/db\n"})}),"\n",(0,r.jsx)(n.h3,{id:"32-run-mongodb-container",children:"3.2 Run MongoDB Container"}),"\n",(0,r.jsx)(n.p,{children:"docker compose up -d"}),"\n",(0,r.jsx)(n.h3,{id:"33-verify",children:"3.3 Verify"}),"\n",(0,r.jsx)(n.p,{children:"docker ps"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 18"',children:"Should show mongo:8\\.0 running on port 27017\\.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"4-python-client-configuration",children:"4. Python Client Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"41-dependencies",children:"4.1 Dependencies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="4.1 Dependencies"',children:"pip install pymongo python\\-dotenv\r\n\r\n### 4\\.2 Environment Variables \\(\\.env\\)\r\n\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 19"',children:"MONGO\\_URI=mongodb://admin:StrongPassword123\\!@localhost:27017/  \n"})}),"\n",(0,r.jsx)(n.p,{children:"MONGO_DB_NAME=smartidh3"}),"\n",(0,r.jsx)(n.h3,{id:"43-python-client-example",children:"4.3 Python Client Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 20"',children:"storage/mongo\\_client\\.py:\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="week3.md snippet 21"',children:"from pymongo import MongoClient  \r\nfrom datetime import datetime, timezone  \r\nimport os  \r\nfrom dotenv import load\\_dotenv  \n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 22"',children:"load\\_dotenv\\(\\)  \n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 23"',children:'MONGO\\_URI = os\\.getenv\\("MONGO\\_URI"\\)  \r\nDB\\_NAME = os\\.getenv\\("MONGO\\_DB\\_NAME"\\)  \n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 24"',children:"client = MongoClient\\(MONGO\\_URI\\)  \n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="4.3 Python Client Example"',children:"db = client\\[DB\\_NAME\\]  \r\n  \n"})}),"\n",(0,r.jsx)(n.p,{children:"# Insert or update a user"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 25"',children:'user\\_data = \\{  \r\n    "email": "alice2@example\\.com",  \r\n    "tenant\\_id": "t1",  \r\n    "name": "Alice",  \r\n    "role": "admin",  \r\n    "created\\_at": datetime\\.now\\(timezone\\.utc\\),  \r\n    "last\\_login": None  \r\n\\}  \r\ndb\\.users\\.update\\_one\\(\\{"email": user\\_data\\["email"\\]\\}, \\{"$set": user\\_data\\}, upsert=True\\)  \n'})}),"\n",(0,r.jsx)(n.p,{children:"# Insert a raw document"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 26"',children:'doc = \\{  \r\n    "tenant\\_id": "t1",  \r\n    "file\\_name": "invoice\\_123\\.pdf",  \r\n    "content\\_type": "application/pdf",  \r\n    "storage\\_path": "/s3/invoices/invoice\\_123\\.pdf",  \r\n    "sha256": "dummyhash123456789",  \r\n    "uploaded\\_by": db\\.users\\.find\\_one\\(\\{"email": "alice2@example\\.com"\\}\\)\\["\\_id"\\],  \r\n    "uploaded\\_at": datetime\\.now\\(timezone\\.utc\\),  \r\n    "status": "uploaded"  \r\n\\}  \r\ndb\\.raw\\_documents\\.update\\_one\\(\\{"sha256": doc\\["sha256"\\]\\}, \\{"$setOnInsert": doc\\}, upsert=True\\)  \n'})}),"\n",(0,r.jsx)(n.p,{children:"# Insert a parsed segment"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 27"',children:'segment = \\{  \r\n    "document\\_id": db\\.raw\\_documents\\.find\\_one\\(\\{"sha256": "dummyhash123456789"\\}\\)\\["\\_id"\\],  \r\n    "segment\\_type": "body",  \r\n    "content": "Parsed invoice content\\.",  \r\n    "created\\_at": datetime\\.now\\(timezone\\.utc\\)  \r\n\\}  \r\ndb\\.parsed\\_segments\\.insert\\_one\\(segment\\)  \n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 28"',children:'print\\("\u2705 MongoDB basic CRUD operations successful\\."\\)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"5-authentication-verification",children:"5. Authentication Verification"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="week3.md snippet 29"',children:"db\\.runCommand\\(\\{ connectionStatus: 1 \\}\\)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Should show your authenticated admin user."}),"\n",(0,r.jsx)(n.h2,{id:"6-acceptance-criteria",children:"6. Acceptance Criteria"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MongoDB container up and running"}),"\n",(0,r.jsx)(n.li,{children:"Authentication verified"}),"\n",(0,r.jsx)(n.li,{children:"Python client connected successfully"}),"\n",(0,r.jsx)(n.li,{children:"Basic CRUD operations complete"}),"\n",(0,r.jsx)(n.li,{children:"Schema and indexes documented"}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var i=t(6540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);