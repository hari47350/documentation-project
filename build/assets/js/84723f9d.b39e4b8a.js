"use strict";(self.webpackChunkproject_docs=self.webpackChunkproject_docs||[]).push([[1248],{4311:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"modules/module1/teamA/week1","title":"Week 01 \u2014 Teama","description":"1\\\\. Overview","source":"@site/docs/modules/module1/teamA/week1.md","sourceDirName":"modules/module1/teamA","slug":"/modules/module1/teamA/week1","permalink":"/docs/modules/module1/teamA/week1","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"week1","title":"Week 01 \u2014 Teama","sidebar_label":"Week 01"},"sidebar":"docsSidebar","next":{"title":"Week 02","permalink":"/docs/modules/module1/teamA/week2"}}');var r=t(4848),i=t(8453);const o={id:"week1",title:"Week 01 \u2014 Teama",sidebar_label:"Week 01"},a="Week 5 - SmartIDH3: MongoDB Schema Hardening, Migrations, Backups & Benchmarking",d={},c=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. Environment &amp; Prerequisites",id:"2-environment--prerequisites",level:2},{value:"4. storage/mongo_client.py (DB connection &amp; index ensures)",id:"4-storagemongo_clientpy-db-connection--index-ensures",level:2},{value:"5. Migrations",id:"5-migrations",level:2},{value:"6. Backups (PowerShell)",id:"6-backups-powershell",level:2},{value:"7. Tests &amp; Benchmarking scripts (exact file names)",id:"7-tests--benchmarking-scripts-exact-file-names",level:2},{value:"7.1 tests/stress_test_parsed_segments.py",id:"71-testsstress_test_parsed_segmentspy",level:3},{value:"7.2 tests/stress_benchmark.py",id:"72-testsstress_benchmarkpy",level:3},{value:"7.3 tests/benchmark_queries.py",id:"73-testsbenchmark_queriespy",level:3},{value:"7.4 tests/benchmark_post_migration.py",id:"74-testsbenchmark_post_migrationpy",level:3},{value:"7.5 tests/full_workflow.py",id:"75-testsfull_workflowpy",level:3},{value:"8. storage/mongo_schema.md (documentation)",id:"8-storagemongo_schemamd-documentation",level:2},{value:"9. Troubleshooting &amp; Issues encountered",id:"9-troubleshooting--issues-encountered",level:2},{value:"10. Acceptance Criteria &amp; Benchmark Results",id:"10-acceptance-criteria--benchmark-results",level:2},{value:"11. How to run (step-by-step)",id:"11-how-to-run-step-by-step",level:2},{value:"12. Next steps &amp; Recommendations",id:"12-next-steps--recommendations",level:2}];function l(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"week-5---smartidh3-mongodb-schema-hardening-migrations-backups--benchmarking",children:"Week 5 - SmartIDH3: MongoDB Schema Hardening, Migrations, Backups & Benchmarking"})}),"\n",(0,r.jsx)(n.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,r.jsx)(n.p,{children:"This document contains a comprehensive record of Week 5 work for the SmartIDH3 project. It covers schema hardening for the parsed_segments collection, migrations, index tuning, TTLs, backup scripts, stress & benchmark tests, troubleshooting notes (issues encountered and fixes), and instructions to run every script with exact file names as present in the repository."}),"\n",(0,r.jsx)(n.h2,{id:"2-environment--prerequisites",children:"2. Environment & Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Required software and environment:"}),"\n",(0,r.jsx)(n.p,{children:"- Python (3.10+ recommended)"}),"\n",(0,r.jsx)(n.p,{children:"- Virtual environment (recommended .venv)"}),"\n",(0,r.jsx)(n.p,{children:"- MongoDB (local or remote) with access and appropriate user/URI"}),"\n",(0,r.jsx)(n.p,{children:"- MongoDB Database Tools (mongodump) for backups"}),"\n",(0,r.jsx)(n.p,{children:"- Python dependencies: pymongo"}),"\n",(0,r.jsx)(n.p,{children:"Setup commands (example):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="2. Environment & Prerequisites"',children:"python \\-m venv \\.venv  \n"})}),"\n",(0,r.jsx)(n.p,{children:".venv\\Scripts\\Activate.ps1  # on Windows PowerShell"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="2. Environment & Prerequisites"',children:"pip install pymongo\r\n\r\n## 3\\. Project files \\(exact names \\- do not change\\)\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"Below are the important files in the repository. These names are used exactly in the code and scripts; do not rename them."}),"\n",(0,r.jsx)(n.p,{children:"- storage/mongo_client.py"}),"\n",(0,r.jsx)(n.p,{children:"- storage/migrations/v2_harden_parsed_segments.py"}),"\n",(0,r.jsx)(n.p,{children:"- storage/create_indexes.py"}),"\n",(0,r.jsx)(n.p,{children:"- scripts/backup_mongosh.ps1"}),"\n",(0,r.jsx)(n.p,{children:"- tests/stress_test_parsed_segments.py"}),"\n",(0,r.jsx)(n.p,{children:"- tests/stress_benchmark.py"}),"\n",(0,r.jsx)(n.p,{children:"- tests/benchmark_queries.py"}),"\n",(0,r.jsx)(n.p,{children:"- tests/benchmark_post_migration.py"}),"\n",(0,r.jsx)(n.p,{children:"- tests/full_workflow.py"}),"\n",(0,r.jsx)(n.p,{children:"- storage/mongo_schema.md"}),"\n",(0,r.jsx)(n.h2,{id:"4-storagemongo_clientpy-db-connection--index-ensures",children:"4. storage/mongo_client.py (DB connection & index ensures)"}),"\n",(0,r.jsx)(n.p,{children:"This file provides the MongoDB client and ensures initial indexes and helper get_db(). Keep the file at storage/mongo_client.py and import it as 'from storage.mongo_client import get_db'."}),"\n",(0,r.jsx)(n.p,{children:"Example content (already present in repo):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="4. storage/mongo_client.py "',children:'from pymongo import MongoClient  \r\nfrom datetime import datetime, timezone   \r\nimport os  \r\n  \r\nMONGO\\_URI = os\\.getenv\\("MONGO\\_URI", "mongodb://localhost:27017/"\\)  \r\nclient = MongoClient\\(MONGO\\_URI\\)  \r\n  \r\ndef get\\_db\\(\\):  \r\n    return client\\["mydb"\\]  \r\n  \r\ndb = get\\_db\\(\\)  \r\n  \n'})}),"\n",(0,r.jsxs)(n.p,{children:["# ensure indexes (examples)",(0,r.jsx)(n.br,{}),"\n",'db.raw_documents.create_index([("tenant_id", 1), ("status", 1), ("uploaded_at", -1)])',(0,r.jsx)(n.br,{}),"\n",'db.raw_documents.create_index("sha256", unique=True)']}),"\n",(0,r.jsxs)(n.p,{children:['db.parsed_segments.create_index([("tenant_id", 1), ("doc_id", 1), ("page_number", 1)])',(0,r.jsx)(n.br,{}),"\n",'db.parsed_segments.create_index([("text", "text")])',(0,r.jsx)(n.br,{}),"\n",'db.parsed_segments.create_index("entities")',(0,r.jsx)(n.br,{}),"\n",'db.parsed_segments.create_index([("created_at", 1)], expireAfterSeconds=2592000)']}),"\n",(0,r.jsxs)(n.p,{children:['db.extracted_entities.create_index([("fields.aadhaar_number.value", 1)])',(0,r.jsx)(n.br,{}),"\n",'db.extracted_entities.create_index([("fields.pan_number.value", 1)])',(0,r.jsx)(n.br,{}),"\n",'db.extracted_entities.create_index("document_type")',(0,r.jsx)(n.br,{}),"\n",'db.extracted_entities.create_index("tenant_id")']}),"\n",(0,r.jsx)(n.p,{children:'db.users.create_index([("tenant_id", 1), ("email", 1)], unique=True)'}),"\n",(0,r.jsx)(n.h2,{id:"5-migrations",children:"5. Migrations"}),"\n",(0,r.jsx)(n.p,{children:"Migration scripts apply schema validators and hardened indexes. The repository contains storage/migrations/v2_harden_parsed_segments.py. Run migrations from project root using python -m storage.migrations.v2_harden_parsed_segments (module syntax)."}),"\n",(0,r.jsx)(n.p,{children:"Example migration script (v2_harden_parsed_segments.py):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="5. Migrations"',children:'from storage\\.mongo\\_client import get\\_db  \r\n  \r\ndef apply\\_hardened\\_indexes\\(\\):  \r\n    db = get\\_db\\(\\)  \r\n    print\\("Applying hardened indexes on parsed\\_segments\\.\\.\\."\\)  \r\n    db\\.parsed\\_segments\\.create\\_index\\(\\[\\("tenant\\_id", 1\\), \\("doc\\_id", 1\\), \\("page\\_number", 1\\)\\], name="tenant\\_id\\_1\\_doc\\_id\\_1"\\)  \r\n    db\\.parsed\\_segments\\.create\\_index\\(\\[\\("text", "text"\\)\\], name="text\\_text"\\)  \r\n    db\\.parsed\\_segments\\.create\\_index\\(\\[\\("entities", 1\\)\\], name="entities\\_1"\\)  \r\n    print\\("All hardened indexes applied successfully\\."\\)  \r\n  \r\nif \\_\\_name\\_\\_ == "\\_\\_main\\_\\_":  \r\n    apply\\_hardened\\_indexes\\(\\)  \r\n\r\n\n'})}),"\n",(0,r.jsx)(n.h2,{id:"6-backups-powershell",children:"6. Backups (PowerShell)"}),"\n",(0,r.jsx)(n.p,{children:"Backup script used: scripts/backup_mongosh.ps1 (file name preserved exactly). This script runs mongodump and cleans old backups."}),"\n",(0,r.jsx)(n.p,{children:"Important: $mongoDumpPath must point to the full path of mongodump.exe (including the executable). Example path in your environment:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="6. Backups "',children:"$mongoDumpPath = 'C:\\\\Users\\\\admin\\\\Downloads\\\\mongodb\\-database\\-tools\\-windows\\-x86\\_64\\-100\\.13\\.0\\\\mongodb\\-database\\-tools\\-windows\\-x86\\_64\\-100\\.13\\.0\\\\bin\\\\mongodump\\.exe'\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"Full backup script (keep file name scripts/backup_mongosh.ps1):"}),"\n",(0,r.jsx)(n.p,{children:"# MongoDB Backup Script (PowerShell)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="6. Backups "',children:'$mongoUri = "mongodb://localhost:27017/mydb"  \r\n$mongoDumpPath = \'C:\\\\Users\\\\admin\\\\Downloads\\\\mongodb\\-database\\-tools\\-windows\\-x86\\_64\\-100\\.13\\.0\\\\mongodb\\-database\\-tools\\-windows\\-x86\\_64\\-100\\.13\\.0\\\\bin\\\\mongodump\\.exe\'  \r\n$backupRoot = "C:\\\\backups"  \r\n$daysToKeep = 90  \r\n  \r\n$timestamp = Get\\-Date \\-Format "yyyyMMdd\\_HHmmss"  \r\n$backupPath = Join\\-Path $backupRoot "mongo\\_$timestamp"  \n'})}),"\n",(0,r.jsx)(n.p,{children:"New-Item -ItemType Directory -Path $backupPath -Force | Out-Null"}),"\n",(0,r.jsx)(n.p,{children:"if (Test-Path $mongoDumpPath) {"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="6. Backups "',children:'    & $mongoDumpPath \\-\\-uri="$mongoUri" \\-\\-out="$backupPath"  \r\n    Write\\-Host "Backup completed successfully at: $backupPath"  \n'})}),"\n",(0,r.jsx)(n.p,{children:"} else {"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="6. Backups "',children:'    Write\\-Host "ERROR: mongodump\\.exe not found at $mongoDumpPath"  \r\n    exit 1  \n'})}),"\n",(0,r.jsx)(n.p,{children:"}"}),"\n",(0,r.jsx)(n.p,{children:"# Cleanup old backups"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="6. Backups "',children:"$cutoff = \\(Get\\-Date\\)\\.AddDays\\(\\-$daysToKeep\\)  \n"})}),"\n",(0,r.jsx)(n.p,{children:"Get-ChildItem -Path $backupRoot -Directory | Where-Object { $_.CreationTime -lt $cutoff } | ForEach-Object {"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="6. Backups "',children:"    Remove\\-Item $\\_\\.FullName \\-Recurse \\-Force  \n"})}),"\n",(0,r.jsx)(n.p,{children:"}"}),"\n",(0,r.jsx)(n.p,{children:"How to run manually in PowerShell (example):"}),"\n",(0,r.jsxs)(n.p,{children:["Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass",(0,r.jsx)(n.br,{}),"\n",".\\scripts\\backup_mongosh.ps1"]}),"\n",(0,r.jsx)(n.p,{children:'Task Scheduler configuration (Action \u2192 Program/script: powershell.exe, Add arguments: -ExecutionPolicy Bypass -File "C:\\Users\\admin\\smartidh3\\scripts\\backup_mongosh.ps1", Start in: C:\\Users\\admin\\smartidh3\\scripts)'}),"\n",(0,r.jsx)(n.h2,{id:"7-tests--benchmarking-scripts-exact-file-names",children:"7. Tests & Benchmarking scripts (exact file names)"}),"\n",(0,r.jsx)(n.p,{children:"The tests folder contains the following scripts. Use module execution from project root (python -m tests.)."}),"\n",(0,r.jsx)(n.h3,{id:"71-testsstress_test_parsed_segmentspy",children:"7.1 tests/stress_test_parsed_segments.py"}),"\n",(0,r.jsx)(n.p,{children:"Purpose: Bulk insert many parsed_segments for stress testing. Make sure storage.mongo_client.get_db exists."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="7.1 tests/stress_test_parsed_segments.py"',children:'from datetime import datetime, timezone  \r\nfrom bson import ObjectId  \r\nfrom storage\\.mongo\\_client import get\\_db  \r\n  \r\ndb = get\\_db\\(\\)  \r\nDOC = db\\.raw\\_documents\\.find\\_one\\(\\)  \r\nif not DOC:  \r\n    raise Exception\\("No raw document found\\. Insert one first\\."\\)  \r\nDOC\\_ID = str\\(DOC\\[\'\\_id\'\\]\\)  \r\n  \r\nNUM\\_SEGMENTS = 10000  \r\nfor i in range\\(NUM\\_SEGMENTS\\):  \r\n    db\\.parsed\\_segments\\.insert\\_one\\(\\{  \r\n        "tenant\\_id": f"t\\{i % 5\\}",  \r\n        "doc\\_id": DOC\\_ID,  \r\n        "page\\_number": \\(i % 10\\) \\+ 1,  \r\n        "text": f"Sample text segment \\{i\\}",  \r\n        "bbox": \\{"x": 0, "y": 0, "w": 100, "h": 50\\},  \r\n        "confidence": 0\\.95,  \r\n        "ocr\\_engine": "tesseract",  \r\n        "entities": \\["sample\\_entity"\\],  \r\n        "created\\_at": datetime\\.now\\(timezone\\.utc\\)  \r\n    \\}\\)  \r\n\r\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"72-testsstress_benchmarkpy",children:"7.2 tests/stress_benchmark.py"}),"\n",(0,r.jsx)(n.p,{children:"Purpose: Insert missing segments and benchmark query performance across iterations."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="7.2 tests/stress_benchmark.py"',children:'import time  \r\nfrom datetime import datetime, timezone  \r\nfrom storage\\.mongo\\_client import get\\_db  \r\n  \r\ndb = get\\_db\\(\\)  \r\nDOC = db\\.raw\\_documents\\.find\\_one\\(\\)  \r\nDOC\\_ID = str\\(DOC\\[\'\\_id\'\\]\\)  \r\nTENANT\\_ID = "t0"  \r\n  \r\nNUM\\_SEGMENTS = 10000  \r\nexisting\\_count = db\\.parsed\\_segments\\.count\\_documents\\(\\{"tenant\\_id": TENANT\\_ID, "doc\\_id": DOC\\_ID\\}\\)  \r\nif existing\\_count < NUM\\_SEGMENTS:  \r\n    for i in range\\(NUM\\_SEGMENTS \\- existing\\_count\\):  \r\n        db\\.parsed\\_segments\\.insert\\_one\\(\\{\\.\\.\\.\\}\\)  \\# see exact insertion fields in repo  \r\n  \n'})}),"\n",(0,r.jsx)(n.p,{children:"# Benchmark loop..."}),"\n",(0,r.jsx)(n.h3,{id:"73-testsbenchmark_queriespy",children:"7.3 tests/benchmark_queries.py"}),"\n",(0,r.jsx)(n.p,{children:"Purpose: Quick benchmark script to measure query time and run explain plan."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="7.3 tests/benchmark_queries.py"',children:'import time  \r\nfrom datetime import datetime, timezone  \r\nfrom storage\\.mongo\\_client import get\\_db  \r\n  \r\ndb = get\\_db\\(\\)  \r\nDOC = db\\.raw\\_documents\\.find\\_one\\(\\)  \r\nDOC\\_ID = str\\(DOC\\[\'\\_id\'\\]\\)  \r\nTENANT\\_ID = "t0"  \r\nquery = \\{"tenant\\_id": TENANT\\_ID, "doc\\_id": DOC\\_ID\\}  \r\n  \r\ntimes = \\[\\]  \r\nfor i in range\\(10\\):  \r\n    start = time\\.time\\(\\)  \r\n    segments = list\\(db\\.parsed\\_segments\\.find\\(query\\)\\)  \r\n    elapsed = \\(time\\.time\\(\\) \\- start\\) \\* 1000  \r\n    times\\.append\\(elapsed\\)  \n'})}),"\n",(0,r.jsx)(n.p,{children:'print("Average:", sum(times)/len(times))'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="7.3 tests/benchmark_queries.py"',children:"plan = db\\.parsed\\_segments\\.find\\(query\\)\\.explain\\(\\)  \n"})}),"\n",(0,r.jsx)(n.p,{children:'print(plan["executionStats"]["executionTimeMillis"])'}),"\n",(0,r.jsx)(n.h3,{id:"74-testsbenchmark_post_migrationpy",children:"7.4 tests/benchmark_post_migration.py"}),"\n",(0,r.jsx)(n.p,{children:"Purpose: Post-migration single-run benchmark and sanity check."}),"\n",(0,r.jsxs)(n.p,{children:["# This file checks a sample segment exists and runs one query + explain",(0,r.jsx)(n.br,{}),"\n","# It converts doc_id to string to satisfy schema."]}),"\n",(0,r.jsx)(n.h3,{id:"75-testsfull_workflowpy",children:"7.5 tests/full_workflow.py"}),"\n",(0,r.jsx)(n.p,{children:"Purpose: Combine insertion, migration, benchmark, and explain plan into a single flow for end-to-end verification."}),"\n",(0,r.jsxs)(n.p,{children:["# Steps executed:",(0,r.jsx)(n.br,{}),"\n","# 1) Apply migrations/indexes",(0,r.jsx)(n.br,{}),"\n","# 2) Insert missing stress data",(0,r.jsx)(n.br,{}),"\n","# 3) Run benchmark queries and print results"]}),"\n",(0,r.jsx)(n.h2,{id:"8-storagemongo_schemamd-documentation",children:"8. storage/mongo_schema.md (documentation)"}),"\n",(0,r.jsx)(n.p,{children:"This markdown file contains the schema overview, index list, TTL rules, and summarized benchmark results. Keep this file under storage/mongo_schema.md for team review."}),"\n",(0,r.jsx)(n.p,{children:"Example content is in the file; ensure it contains index list including tenant_id_1_doc_id_1, text text index, and TTL entry."}),"\n",(0,r.jsx)(n.h2,{id:"9-troubleshooting--issues-encountered",children:"9. Troubleshooting & Issues encountered"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="9. Troubleshooting & Issues encountered"',children:"Below are the common issues encountered during Week 5 and how they were fixed \\(record these in the doc for team context\\):\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"- ModuleNotFoundError: No module named 'storage' \u2014 Run scripts using module syntax from project root: python -m tests. or add project root to PYTHONPATH."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="9. Troubleshooting & Issues encountered"',children:"\\- Document failed validation \u2014 Fix: convert DOC\\['\\_id'\\] \\(ObjectId\\) to string before inserting into parsed\\_segments\\. Use DOC\\_ID = str\\(DOC\\['\\_id'\\]\\)\\.\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"- mongodump not found in PowerShell/VS Code \u2014 Ensure $mongoDumpPath points to full path including mongodump.exe; or add tools bin to PATH."}),"\n",(0,r.jsx)(n.h2,{id:"10-acceptance-criteria--benchmark-results",children:"10. Acceptance Criteria & Benchmark Results"}),"\n",(0,r.jsx)(n.p,{children:"Acceptance: Queries for segments by doc_id and tenant_id must be 200ms for sample data."}),"\n",(0,r.jsx)(n.p,{children:"Representative benchmark results from runs:"}),"\n",(0,r.jsx)(n.p,{children:"- Average query time over multiple runs: ~85 - 140 ms (varies by dataset size)."}),"\n",(0,r.jsx)(n.p,{children:"- Example run: Average 139.42 ms (one iteration peaked at 250.98 ms due to local spike)."}),"\n",(0,r.jsx)(n.p,{children:"- Index used consistently: tenant_id_1_doc_id_1"}),"\n",(0,r.jsx)(n.h2,{id:"11-how-to-run-step-by-step",children:"11. How to run (step-by-step)"}),"\n",(0,r.jsx)(n.p,{children:"1. Activate virtual env: .venv\\Scripts\\Activate.ps1"}),"\n",(0,r.jsx)(n.p,{children:"2. Ensure MongoDB is running and accessible and MONGO_URI set if not default."}),"\n",(0,r.jsx)(n.p,{children:"3. Apply migrations (from project root):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="11. How to run "',children:"python \\-m storage\\.migrations\\.v2\\_harden\\_parsed\\_segments\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"4. Run stress insertion: (from project root)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="11. How to run "',children:"python \\-m tests\\.stress\\_test\\_parsed\\_segments\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"5. Run benchmark:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:'title="11. How to run "',children:"python \\-m tests\\.stress\\_benchmark  \r\npython \\-m tests\\.benchmark\\_queries  \r\npython \\-m tests\\.benchmark\\_post\\_migration\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"6. Run backup manually to verify:"}),"\n",(0,r.jsx)(n.p,{children:".\\scripts\\backup_mongosh.ps1  # in PowerShell (ensure execution policy bypass)"}),"\n",(0,r.jsx)(n.h2,{id:"12-next-steps--recommendations",children:"12. Next steps & Recommendations"}),"\n",(0,r.jsx)(n.p,{children:"- Consider bulk insert (insert_many) in stress scripts for speed."}),"\n",(0,r.jsx)(n.p,{children:"- Monitor p95 and p99 latencies, not just average."}),"\n",(0,r.jsx)(n.p,{children:"- Configure automated Task Scheduler job for scripts/backup_mongosh.ps1 if desired."}),"\n",(0,r.jsx)(n.p,{children:"- Consider sharding/partitioning if dataset grows beyond single-node IO capacity."}),"\n",(0,r.jsx)(n.p,{children:"- Add CI job to run benchmark script on staging after migrations."}),"\n",(0,r.jsx)(n.p,{children:"Generated for SmartIDH3 - Week 5. Includes exact file names and instructions as requested."})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);